<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>guerrillagrotto.space</title>

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href='data:image/svg+xml;utf8,
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
    <circle cx="32" cy="32" r="27" fill="none" stroke="black" stroke-width="4"/>
    <path d="M32 16v32M16 32h32" stroke="black" stroke-width="4" fill="none" stroke-linecap="square"/>
  </svg>' />

  <style>
    :root{
      --bg: #000;          
      --fg: #fff;          
      --muted: #999;
      --stroke: 1px;       
      --cursor-stroke: 1.6px; 
      --plus-size: 16px;       
      --ui-scale: 78vmin;  
      --phrase-gap: 12ch;  
      --text-size: 12px;   
    }

    html,body{height:100%;}
    *{box-sizing:border-box}

    body{
      margin:0;
      background:var(--bg);
      color:var(--fg);
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
      cursor:none;
      overflow:hidden;
      position:relative;
    }

    /* ========= BACKGROUND VIDEO ========= */
    #bgVideo{
      position:fixed;
      inset:0;
      width:100%;
      height:100%;
      object-fit:cover;
      opacity:0.4;
      z-index:0;
      pointer-events:none;
    }

    /* ========= CUSTOM CURSOR ========= */
    .cursor-plus{
      position: fixed;
      left:0;
      top:0;
      width:0;
      height:0;
      z-index:1000;
      pointer-events:none;
      filter: drop-shadow(0 0 1px var(--bg));
    }
    .cursor-plus::before,
    .cursor-plus::after{
      content:"";
      position:absolute;
      border: var(--cursor-stroke) solid currentColor;
      left:0; top:0;
      transform:translate(-50%, -50%);
    }
    .cursor-plus::before{
      width: calc(var(--plus-size)*2);
      height:0;
    }
    .cursor-plus::after{
      height: calc(var(--plus-size)*2);
      width:0;
    }

    /* ========= MAIN SVG FRAME ========= */
    .stage{
      position:absolute;
      inset:0;
      display:grid;
      place-items:center;
      z-index:10;
    }

    .frame{
      width:min(var(--ui-scale), 92vw);
      height:auto;
      max-height:72vh;
      aspect-ratio:4/3;
      display:block;
    }

    /* shop button color */
    #leftPlus{
      stroke:#ff3333;
      color:#ff3333;
    }

    /* invisible click area */
    #leftPlus circle{
      fill:transparent;
      stroke:none;
      pointer-events:auto;
    }

    /* rotating issue text */
    #issue{
      fill:#ff3333;
    }

    /* ========= BOTTOM MARQUEE ========= */
    .marquee-wrap{
      position:fixed;
      bottom:0;
      left:0; right:0;
      padding-bottom:8px;
      z-index:10;
      user-select:none;
    }

    .marquee{ 
      display:flex; 
      white-space:nowrap; 
      gap:var(--phrase-gap);
      will-change:transform;
      animation:scroll 18s linear infinite;
      font-size:var(--text-size);
      letter-spacing:0.02em;
      color:var(--fg);
    }

    @keyframes scroll{
      from{transform:translateX(0);}
      to{transform:translateX(-50%);}
    }

    .marquee.paused{
      animation-play-state:paused;
    }

  </style>
</head>

<body>

  <!-- BACKGROUND VIDEO -->
  <video id="bgVideo" autoplay muted loop playsinline>
    <source src="grottobackground.mp4" type="video/mp4" />
  </video>

  <!-- CURSOR -->
  <div id="cursor" class="cursor-plus"></div>

  <!-- MAIN INTERFACE -->
  <main class="stage">
    <svg id="ui" class="frame" viewBox="0 0 800 600">

      <defs>
        <path id="ringPath"
          d="M 533.33,300 m -110,0 a 110,110 0 1,1 220,0 a 110,110 0 1,1 -220,0" />
      </defs>

      <g stroke="currentColor" fill="none" stroke-width="var(--stroke)">
        <rect x="120" y="120" width="560" height="360" rx="2"/>

        <circle cx="266.67" cy="300" r="120" />
        <circle cx="533.33" cy="300" r="120" />

        <!-- Rotating issue text (ONE INSTANCE) -->
        <text id="issue" style="font-size:var(--text-size);" letter-spacing="0.08em">
          <textPath href="#ringPath" startOffset="0%">
            ISSUE 001 â€” 12/18
            <animate attributeName="startOffset" from="0%" to="100%"
              dur="16s" repeatCount="indefinite" />
          </textPath>
        </text>

        <!-- STATIC RIGHT PLUS -->
        <g id="rightPlus" transform="translate(573.33, 340)">
          <line x1="-24" y1="0" x2="24" y2="0"/>
          <line x1="0" y1="-24" x2="0" y2="24"/>
        </g>

        <!-- SHOP BUTTON (LEFT PLUS) -->
        <g id="leftPlus" transform="translate(306.67, 340)">
          <circle r="40"></circle> <!-- invisible big hit area -->
          <line x1="-24" y1="0" x2="24" y2="0"/>
          <line x1="0" y1="-24" x2="0" y2="24"/>
        </g>
      </g>
    </svg>
  </main>


  <!-- BOTTOM MARQUEE -->
  <div class="marquee-wrap">
    <div id="marquee" class="marquee"></div>
  </div>


<script>
/* ========== CUSTOM CURSOR ========== */
const cursor = document.getElementById("cursor");
function updateCursor(e){
  cursor.style.transform = `translate(${e.clientX}px, ${e.clientY}px)`;
}
window.addEventListener("mousemove", updateCursor);

/* ========== BUILD MARQUEE ========== */
const marquee = document.getElementById("marquee");

function buildMarquee(){
  const chunk = document.createElement("div");
  chunk.className = "chunk";

  for(let i=0; i<30; i++){
    const phrase = document.createElement("span");
    phrase.textContent = "Welcome to the grotto";
    chunk.appendChild(phrase);
  }

  const clone = chunk.cloneNode(true);
  marquee.appendChild(chunk);
  marquee.appendChild(clone);
}
buildMarquee();

/* Pause marquee on hover */
marquee.addEventListener("mouseover", ()=> marquee.classList.add("paused"));
marquee.addEventListener("mouseout", ()=> marquee.classList.remove("paused"));

/* ========== SHOP BUTTON CLICK ========== */
document.getElementById("leftPlus").addEventListener("click", ()=>{
  window.location.href = "shop.html";
});

/* ========== DRAG LOGIC REMOVED (NO GUERRILLA MODE) ========== */
/* Nothing toggles the background or text now. */

</script>

</body>
</html>

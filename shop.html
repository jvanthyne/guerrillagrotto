<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>shop — guerrillagrotto.space</title>

  <!-- Favicon: empty circle with a plus inside (same as index) -->
  <link rel="icon" type="image/svg+xml" href='data:image/svg+xml;utf8,
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
      <circle cx="32" cy="32" r="27" fill="none" stroke="black" stroke-width="4"/>
      <path d="M32 16v32M16 32h32" stroke="black" stroke-width="4" fill="none" stroke-linecap="square"/>
    </svg>' />

  <style>
    :root{
      --bg: #000;          /* base background */
      --fg: #fff;          /* base foreground (text + lines) */
      --muted: #999;
      --stroke: 1px;       /* global stroke width */
      --cursor-stroke: 1.6px; /* custom cursor stroke */
      --plus-size: 16px;       /* custom cursor plus arm length */
      --ui-scale: 78vmin;  /* size of the main framed UI */
      --phrase-gap: 12ch;  /* spacing between repeated phrases */
      --hover-delta: 18%;  /* how much lighter/darker on hover */
      --text-size: 12px;   /* unified size for banner + interior text */
    }

    /* Inverted ("Guerrilla") mode */
    body.inverted{
      --bg:#fff;
      --fg:#000;
    }

    /* Base reset */
    html,body{height:100%;}
    *{box-sizing:border-box}
    body{
      margin:0;
      background:var(--bg);
      color:var(--fg);
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      cursor: none; /* hide default cursor on body */
      overflow:hidden; /* keep layout tight like index */
    }
    /* Ensure no default cursor anywhere */
    body *{ cursor:none; }

    /* ==== Floating marquees ==== */
    .marquee-wrap{
      position: fixed;
      left: 0; right: 0;
      user-select: none;
      z-index: 20;
    }
    .marquee-wrap.bottom{
      bottom: 0;
      padding-bottom: 8px;
    }
    .marquee-wrap.top{
      top: 0;
      padding-top: 8px;
    }

    .marquee{ 
      display: flex; 
      white-space: nowrap; 
      gap: var(--phrase-gap);
      will-change: transform;
      animation: scroll 18s linear infinite;
      font-size: var(--text-size);
      letter-spacing: 0.02em;
    }
    @keyframes scroll{ from{transform: translateX(0);} to{transform: translateX(-50%);} }

    .marquee .chunk{ display:flex; gap: var(--phrase-gap); }
    .phrase{ pointer-events:auto; }
    .phrase .grotto{ pointer-events:auto; transition: filter .15s ease; }
    .marquee.paused{ animation-play-state: paused; }

    /* Hover affordance: slightly darker or lighter */
    .hover-affordance{ filter: brightness(calc(100% - var(--hover-delta))); }
    body.inverted .hover-affordance{ filter: brightness(calc(100% + var(--hover-delta))); }

    /* ==== Centered product frame ==== */
    .stage{
      position:absolute;
      inset:0;
      display:grid;
      place-items:center;
      padding: 24px;
    }
    .frame{
      width: min(var(--ui-scale), 92vw);
      max-height: 72vh;
      aspect-ratio: 4 / 3;
      border: var(--stroke) solid currentColor;
      display:flex;
      padding: 24px;
    }

    .product-layout{
      display:flex;
      gap: 24px;
      width:100%;
      height:100%;
    }

    /* Left: images */
    .product-media{
      flex: 3;
      display:flex;
      flex-direction:column;
      gap: 8px;
      min-width: 0;
    }

    .product-image-main-wrap{
      flex:1;
      border: var(--stroke) solid currentColor;
      overflow:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    .product-image-main{
      max-width:100%;
      max-height:100%;
      object-fit:cover;
      display:block;
    }

    .thumb-strip{
      display:flex;
      flex-wrap:wrap;
      gap: 6px;
      margin-top: 4px;
    }

    .thumb{
      border: var(--stroke) solid currentColor;
      width: calc(20% - 4px);
      aspect-ratio: 4 / 3;
      overflow:hidden;
      opacity:0.7;
      transition: opacity .15s ease, transform .15s ease;
      background:none;
      padding:0;
    }

    .thumb img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }

    .thumb:hover{
      opacity:1;
      transform: translateY(-1px);
    }

    .thumb.is-active{
      opacity:1;
    }

    /* Right: text + simple “shop” meta */
    .product-meta{
      flex: 2;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      font-size: var(--text-size);
      line-height:1.5;
      min-width:0;
    }

    .product-header{
      margin-bottom: 16px;
    }

    .product-title{
      margin:0 0 6px 0;
      font-weight:400;
      font-style:italic; /* title in italics */
      font-size: 14px;
    }

    .product-location{
      margin:0 0 10px 0;
      color:var(--muted);
    }

    .product-meta-small{
      margin:0;
      color:var(--muted);
      letter-spacing:0.08em;
      text-transform:uppercase;
      font-size: 10px;
    }

    .product-description{
      margin: 0 0 12px 0;
      max-width: 34ch;
    }

    .product-notes{
      margin:0;
    }

    .product-footer{
      display:flex;
      flex-direction:column;
      gap:6px;
    }

    .product-price{
      margin:0;
      font-size: 13px;
    }

    .product-cta-row{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
    }

    .product-secondary{
      font-size: 10px;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }
    .product-secondary button{
      background:none;
      border:none;
      padding:0;
      color:inherit;
      text-decoration:underline;
      text-underline-offset:2px;
    }

    .btn{
      border: var(--stroke) solid currentColor;
      padding: 6px 10px;
      font-size: var(--text-size);
      background:none;
      color:inherit;
      text-transform:uppercase;
      letter-spacing:0.08em;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      min-width: 120px;
    }

    .btn:hover{
      filter: brightness(calc(100% - var(--hover-delta)));
    }
    body.inverted .btn:hover{
      filter: brightness(calc(100% + var(--hover-delta)));
    }

    /* Simple “back home” link in top-left corner */
    .site-nav{
      position:fixed;
      top:12px;
      left:12px;
      z-index:30;
      font-size: var(--text-size);
    }
    .site-nav a{
      color:inherit;
      text-decoration:none;
      border-bottom: var(--stroke) solid transparent;
      padding-bottom:1px;
    }
    .site-nav a:hover{
      border-color: currentColor;
    }

    /* ====== Custom PLUS cursor (FIXED FOR SHOP PAGE) ====== */
    .cursor-plus{
      position: fixed;
      left:0;
      top:0;
      width:0;
      height:0;
      z-index: 1000;
      pointer-events: none;
      /* stays visible on both black + white */
      filter: drop-shadow(0 0 1px var(--bg));
    }
    .cursor-plus::before,
    .cursor-plus::after{
      content:"";
      position:absolute;
      left:0;
      top:0;
      border: var(--cursor-stroke) solid currentColor;
      width: calc(var(--plus-size)*2);
      height: 0;
      transform: translate(-50%, -50%);
    }
    .cursor-plus::after{
      width:0;
      height: calc(var(--plus-size)*2);
    }
  </style>
</head>
<body>
  <div id="cursor" class="cursor-plus" aria-hidden="true"></div>

  <!-- Minimal nav: back to index -->
  <div class="site-nav">
    <a href="index.html">◀ back to grotto</a>
  </div>

  <!-- Top marquee -->
  <div class="marquee-wrap top">
    <div id="marqueeTop" class="marquee" aria-hidden="true"></div>
  </div>

  <!-- Centered product composition -->
  <main class="stage">
    <section class="frame" aria-labelledby="product-title">
      <div class="product-layout">
        <!-- Left: images -->
        <div class="product-media">
          <div class="product-image-main-wrap">
            <!-- Feature image -->
            <img
              id="productMain"
              class="product-image-main"
              src="ggproductimage001.png"
              alt="Issue 001 cover — guerrilla grotto"
            />
          </div>

          <!-- Aux images 002–005 -->
          <div class="thumb-strip" aria-label="Additional views of Issue 001">
            <button class="thumb is-active" data-full="ggproductimage001.png" aria-label="Main cover">
              <img src="ggproductimage001.png" alt="Issue 001 – main cover" />
            </button>
            <button class="thumb" data-full="ggproductimage002.png" aria-label="Alternate view 1">
              <img src="ggproductimage002.png" alt="Issue 001 – view 2" />
            </button>
            <button class="thumb" data-full="ggproductimage003.png" aria-label="Alternate view 2">
              <img src="ggproductimage003.png" alt="Issue 001 – view 3" />
            </button>
            <button class="thumb" data-full="ggproductimage004.png" aria-label="Alternate view 3">
              <img src="ggproductimage004.png" alt="Issue 001 – view 4" />
            </button>
            <button class="thumb" data-full="ggproductimage005.png" aria-label="Alternate view 4">
              <img src="ggproductimage005.png" alt="Issue 001 – view 5" />
            </button>
          </div>
        </div>

        <!-- Right: copy + meta -->
        <aside class="product-meta">
          <div class="product-header">
            <h1 id="product-title" class="product-title">
              <em>Issue 001, (berkeley, ca)</em>
            </h1>
            <p class="product-location">zine + stainless steel cup</p>
            <p class="product-meta-small">FIRST ISSUE / LIMITED RUN / FIELD KIT</p>
          </div>

          <div>
            <p class="product-description">
              Issue 001 is a key into a loose matrix of guerrilla furniture
              on and around the UC Berkeley campus. Benches, tables, ledges,
              ad-hoc rooms — small interruptions in the usual circulation.
            </p>
            <p class="product-notes">
              Each set includes: one printed zine and one stainless steel cup
              for the beverage of your choice. The zine functions as a map and
              “key” to locate the pieces; the cup acts as an open invitation to
              future gatherings and events. Once purchased, you’ll be contacted
              with additional coordinates.
            </p>
          </div>

          <div class="product-footer">
            <p class="product-price">USD 12.00 — includes zine + cup (ships from Berkeley, CA)</p>

            <!-- primary CTA -->
            <div class="product-cta-row">
              <a
                class="btn"
                href="mailto:orders@guerrillagrotto.space?subject=Issue%20001%20order&body=Thanks%20for%20your%20interest%20in%20Issue%20001%2C%20drop%20your%20name%20and%20we%27ll%20respond%20with%20payment%20and%20drop%2Doff%20information%2E%0A%0AThanks."
              >
                email to purchase
              </a>
            </div>

            <!-- secondary: moved add to list -->
            <div class="product-secondary">
              <button type="button">add to list</button>
            </div>
          </div>
        </aside>
      </div>
    </section>
  </main>

  <!-- Bottom marquee -->
  <div class="marquee-wrap bottom">
    <div id="marqueeBottom" class="marquee" aria-hidden="true"></div>
  </div>

  <script>
    /* ================= Custom PLUS cursor ================= */
    const cursor = document.getElementById('cursor');
    const setCursorPos = (e) => {
      cursor.style.transform = `translate(${e.clientX}px, ${e.clientY}px)`;
    };
    window.addEventListener('mousemove', setCursorPos, {passive:true});
    window.addEventListener('touchmove', (e)=>{
      if(e.touches && e.touches[0]){
        setCursorPos({clientX:e.touches[0].clientX, clientY:e.touches[0].clientY});
      }
    }, {passive:true});

    /* ================= Build marquees ================= */
    const marqueeTop = document.getElementById('marqueeTop');
    const marqueeBottom = document.getElementById('marqueeBottom');

    function buildMarquee(target, makeChunk){
      if(!target) return;
      const one = makeChunk();
      const two = one.cloneNode(true);
      target.appendChild(one);
      target.appendChild(two);
    }

    function makeBottomChunk(){
      const one = document.createElement('div');
      one.className = 'chunk';
      for (let i=0;i<30;i++) {
        const phrase = document.createElement('span');
        phrase.className = 'phrase';
        phrase.appendChild(document.createTextNode('Welcome to the '));
        const grot = document.createElement('span');
        grot.textContent = 'grotto';
        grot.className = 'grotto';
        phrase.appendChild(grot);
        one.appendChild(phrase);
      }
      return one;
    }

    function makeTopChunk(){
      const one = document.createElement('div');
      one.className = 'chunk';
      const phrase = document.createElement('span');
      phrase.className = 'phrase';
      phrase.textContent = 'Limited stock available — order today — free delivery in Berkeley';
      one.appendChild(phrase);
      return one;
    }

    buildMarquee(marqueeBottom, makeBottomChunk);
    buildMarquee(marqueeTop, makeTopChunk);

    /* ================= Marquee interactions ================= */
    [marqueeTop, marqueeBottom].forEach(mq => {
      if(!mq) return;
      mq.addEventListener('mouseover', (e)=>{
        mq.classList.add('paused');
        if(e.target.classList.contains('grotto')){
          e.target.classList.add('hover-affordance');
        }
      });
      mq.addEventListener('mouseout', (e)=>{
        mq.classList.remove('paused');
        if(e.target.classList.contains('grotto')){
          e.target.classList.remove('hover-affordance');
        }
      });
    });

    /* ================= Mode toggle via clicking any "grotto" word ================= */
    let guerrillaMode = false;

    function randomChar(){
      const chars = '!<>-_\\/[]{}—=+*^?#________';
      return chars[Math.floor(Math.random()*chars.length)];
    }
    function glitchSwap(node, toText){
      const from = node.textContent;
      const max = Math.max(from.length, toText.length);
      let i=0;
      const timer = setInterval(()=>{
        const out = [];
        for(let k=0;k<max;k++){
          const targetCh = (k < toText.length) ? toText[k] : '';
          if(k < i){ out.push(targetCh); }
          else { out.push(randomChar()); }
        }
        node.textContent = out.join('');
        i++;
        if(i>max){
          clearInterval(timer);
          node.textContent = toText;
        }
      }, 18);
    }

    function toggleMode(){
      guerrillaMode = !guerrillaMode;
      document.body.classList.toggle('inverted', guerrillaMode);
      document.querySelectorAll('.grotto').forEach(el=>{
        const to = guerrillaMode ? 'guerrilla grotto' : 'grotto';
        glitchSwap(el, to);
      });
    }

    if(marqueeBottom){
      marqueeBottom.addEventListener('click', (e)=>{
        if(e.target.classList.contains('grotto')){
          toggleMode();
        }
      });
    }

    document.addEventListener('keydown', (e)=>{
      if(e.key.toLowerCase()==='g'){
        toggleMode();
      }
    });

    /* ================= Thumbnail -> main image swap ================= */
    const mainImg = document.getElementById('productMain');
    const thumbs = document.querySelectorAll('.thumb');

    thumbs.forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const full = btn.getAttribute('data-full');
        if(full){
          mainImg.src = full;
        }
        thumbs.forEach(t=>t.classList.remove('is-active'));
        btn.classList.add('is-active');
      });
    });
  </script>
</body>
</html>
